/* ============================================================
   Animation Components â€” shared styles
   ============================================================ */

/* --- Typing Cursor --- */
.typing-cursor {
  display: inline;
  font-weight: 300;
  color: var(--accent);
  animation: blink-typing 0.6s step-end infinite;
  margin-left: 1px;
}

@keyframes blink-typing {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* --- Text Morph --- */
.text-morph {
  display: inline;
}

.text-morph--active {
  display: flex;
  flex-wrap: wrap;
  gap: 0;
}

.text-morph__word {
  display: inline;
  transition: color var(--duration-normal) ease;
}

.text-morph__word--new {
  color: var(--text-accent);
}

/* Brief glow on the paragraph during morph */
.fake-editor__paragraph--morphing {
  box-shadow: 0 0 30px rgba(124, 138, 255, 0.08);
  border-radius: var(--radius-md);
  transition: box-shadow var(--duration-slow) ease;
}

/* --- Diff Animation --- */
.diff-text {
  display: inline;
}

.diff-scanning {
  display: inline-block;
  margin-left: 8px;
  font-size: 13px;
  color: var(--accent);
  font-style: italic;
}

/* Matches real Inkstone proofreading styles from editor.css */
.diff-deletion {
  display: inline;
  background: #fef2f2;
  color: #b91c1c;
  text-decoration: line-through;
  text-decoration-color: rgb(185 28 28);
  text-decoration-thickness: 1.5px;
  padding: 1px 0;
  border-radius: 2px;
  margin-right: 2px;
  box-shadow: 0 0 0 1px rgb(185 28 28 / 0.3);
  transition: opacity 0.3s ease, background-color 0.2s, color 0.2s;
}

[data-theme="dark"] .diff-deletion {
  background: rgb(127 29 29 / 0.3);
  color: #fecaca;
  text-decoration-color: #f87171;
  box-shadow: 0 0 0 1px rgb(248 113 113 / 0.3);
}

.diff-deletion--resolved {
  opacity: 0;
  display: none;
}

.diff-insertion {
  display: inline;
  background: #dcfce7;
  color: #15803d;
  padding: 2px 4px;
  border-radius: 4px;
  transition: background-color 0.2s, color 0.2s;
}

[data-theme="dark"] .diff-insertion {
  background: rgb(20 83 45 / 0.3);
  color: #bbf7d0;
}

.diff-accept-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-top: 16px;
  padding: 8px 16px;
  background: var(--diff-insert-bg);
  color: var(--diff-insert-text);
  border: 1px solid var(--diff-insert-text);
  border-radius: var(--radius-md);
  font-family: var(--font-sans);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  animation: pulse-accept 1.5s ease-in-out infinite;
}

@keyframes pulse-accept {
  0%, 100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.3); }
  50% { box-shadow: 0 0 0 6px rgba(74, 222, 128, 0); }
}

/* --- Research Components --- */
.research-loading {
  padding: var(--space-sm) 0;
}

.research-shimmer {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.research-shimmer__line {
  height: 12px;
  background: linear-gradient(90deg, var(--shimmer-from), var(--shimmer-to), var(--shimmer-from));
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 4px;
}

.research-shimmer__line--long { width: 100%; }
.research-shimmer__line--medium { width: 80%; }
.research-shimmer__line--short { width: 60%; }

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.research-response {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.research-response__text {
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.6;
  color: var(--text-primary);
}

.research-response__citations {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.research-citation {
  font-family: var(--font-sans);
  font-size: 11px;
  color: var(--accent);
  opacity: 0.8;
}

.research-insert-btn {
  align-self: flex-start;
  margin-top: 8px;
  padding: 8px 16px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-md);
  font-family: var(--font-sans);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  animation: pulse-insert 1.5s ease-in-out infinite;
}

@keyframes pulse-insert {
  0%, 100% { box-shadow: 0 0 0 0 rgba(124, 138, 255, 0.3); }
  50% { box-shadow: 0 0 0 6px rgba(124, 138, 255, 0); }
}

/* --- Research Doc Insert (content flowing into document) --- */
.research-doc-insert {
  margin-top: var(--space-lg);
  overflow: hidden;
}

.research-doc-insert__divider {
  width: 60px;
  height: 2px;
  background: var(--border-primary);
  margin-bottom: var(--space-md);
}

.research-doc-insert__text {
  font-family: var(--font-sans);
  font-size: 16px;
  line-height: 1.7;
  color: var(--text-primary);
}

.research-doc-insert__citations {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: var(--space-sm);
}

.research-doc-citation {
  font-family: var(--font-sans);
  font-size: 12px;
  color: var(--accent);
  opacity: 0.7;
}
